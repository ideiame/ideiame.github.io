
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Timelapse girando no Raspberry PI</title>
    
    <meta name="author" content="Jônatas Davi Paganini">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link id="bootstrap" href="/css/bootstrap.css" rel="stylesheet">
    <link id="bootstrap" href="/css/bootswatch.min.css" rel="stylesheet">
    <link href="/css/nimbus-pygments.css" rel="stylesheet">

    <script src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/bootstrap-dropdown.js"></script>
    <div id="fb-root"></div>

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  <script type="text/javascript" language="javascript" charset="utf-8">
// <![CDATA[
    addEventListener('load', function (event) {
      var agent=navigator.userAgent.toLowerCase();
      var links = document.getElementsByTagName('a');
      var regex = new RegExp('^'+window.location.protocol + '//' + window.location.hostname);

      for (var i = 0, linksLength = links.length; i < linksLength; i++) {
        if ( ! links[i].href.match(regex)) {
           links[i].setAttribute('target', '_blank');
       }
     }

    }, false);
// ]]>
</script>
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.5&appId=138593009602387";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="/">
            <img class="img-circle" alt="ideiame logo" style="padding-top: 6px" src="/images/ideiame.png"></a>
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
           </button>
       </div>
   <div class="navbar-collapse collapse" id="navbar-main">
     <ul class="nav navbar-nav">
      <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Social<b class="caret"></b></a>
            <ul class="dropdown-menu" id="swatch-menu">
              <li><a href="https://github.com/jonatas">Github</a></li>
              <li><a href="https://twitter.com/jonatasdp">Twitter</a></li>
              <li><a href="https://instagram.com/jonatasdp">Instagram</a></li>
              <li><a href="https://www.meetup.com/Floripa-on-Rails/members/185190193/">Meetup</a></li>
              <li><a href="https://www.slideshare.net/jonataspaganini/">SlideShare</a></li>
              <li><a href="https://facebook.com/jonatas.paganini">Facebook</a></li>
              <li><a href="https://www.youtube.com/user/jonatasdp">Youtube</a></li>
           </ul>
          </li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Projects<b class="caret"></b></a>
            <ul class="dropdown-menu">
            <li><a href="https://github.com/jonatas/fast">Fast</a></li>
            <li><a href="http://torf.ideia.me">2015: True Or False Game</a></li>
            <li><a href="http://github.com/jonatas/pixel.ideia.me">2013: Pixel art (collaborative) </a></li>
            <li><a href="http://github.com/jonatas/trybliss">2013: Try Bliss</a</li>
            <li><a href="http://github.com/jonatas/churumelas">2012: Regexp challenges</a></li>
            <li><a href="/camera-overlay">2012: Camera Overlay </a></li>
           </ul>
          </li>
          
          
          


  
    
      
      	
      	<li><a href="/archive">Arquivo</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories">Categorias</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  



          </ul>
        </div>
      </div>
     </div>
    </div>
    <div class="container">
      
<div class="page-header">
    <h1>
       <img class="thumb img-circle" src="https://avatars0.githubusercontent.com/u/15484?s=50" title="Jônatas Davi Paganini" alt="Jônatas Davi Paganini profile pic"></img>
       Timelapse girando no Raspberry PI <small><br/>01/04/2014
    
      <span class="categories">
        
          <a  class="btn btn-primary" href=/categories.html#python-ref>python
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
            <span class="badge">1</span>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
          </a>
         
          <a  class="btn btn-primary" href=/categories.html#raspberry pi-ref>raspberry pi
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
            <span class="badge">3</span>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
          </a>
         
       </span>
     
     </small>
  </h1>
</div>
<div class="content">
    <p>A <a href="http://pt.wikipedia.org/wiki/Internet_das_Coisas">internet das coisas</a> está aí! Então também decidi entrar para o mundo dos embarcados e conectar algumas dessas coisas :)</p>

<p>Inicialmente comprei um beaglebone e agora um raspberry pi.</p>

<p>Estou me aprofundando nestas tecnologias pois acredito que o futuro exige que migramos grande parte dos nossos sistemas para a nuvem e dispositivos embarcados.</p>

<p>Desta forma, na nuvem eu já estou trabalhando, e agora quero trabalhar com a conexão destes aparelhos e sensores diversos que estão surgindo.</p>

<p>A alguns dias comprei um Raspberry PI (RPI) e agora estou iniciando uma série de experimentos com dispositivos embarcados.</p>

<h2 id="o-raspberry-pi">O Raspberry PI</h2>

<p>O RPI é um computador do tamanho de um cartão de crédito com saída HDMI, roda linux e tem uma série de pinos extras permitindo conectar sensores diversos através de uma estrutura de genérica de entrada e saída GPIO: General-purpose input/output.</p>

<iframe src="//instagram.com/p/liZyFjnfaR/embed/" width="445px" height="535px" frameborder="0" scrolling="no" allowtransparency="true"></iframe>

<h2 id="a-raspi-cam">A Raspi CAM</h2>

<p>Também comprei a camera oficial e ontem fiz funcionar com um motor para girar a câmera e fazer um timelapse.</p>

<iframe src="//instagram.com/p/ltELezHfQ4/embed/" width="445px" height="535px" frameborder="0" scrolling="no" allowtransparency="true"></iframe>

<p>Essa camera é muito boa e fácil de usar. Para utilizar ela via código em python, tive que instalar uma biblioteca com um nome sugestivo: <code class="language-plaintext highlighter-rouge">python-camera</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install python-camera
</code></pre></div></div>

<p>Depois disso é só utilizar no código diretamente:</p>

<pre class="prettyprint">
with picamera.PiCamera() as camera:
    camera.capture('pic.jpeg')
</pre>

<p>Também dá pra manipular a camera e as propriedades como brilho, contraste ou foco.</p>

<pre class="prettyprint">
with picamera.PiCamera() as camera:
    camera.brightness = 50
    camera.contrast = 70
</pre>

<p>Além disso também dá pra pré-visualizar e gravar vídeos.</p>

<pre class="prettyprint">
with picamera.PiCamera() as camera:
    camera.preview()
    camera.start_recording('myvideo.h264')
    camera.stop_recording()
</pre>

<p>Além deste programa ainda existe um programa na linha de comando que dá para gravar vídeos ou tirar fotos. As fotos também podem ser tiradas em sequência para fazer um timelapse.</p>

<h2 id="o-motor">O motor</h2>

<p>E também comprei um motor de passo para girar a camera.</p>

<iframe src="//instagram.com/p/l_br0enfb5/embed/" width="445px" height="535px" frameborder="0" scrolling="no" allowtransparency="true"></iframe>

<p>Este motor é um 28BYJ-48 e está conectado com um módulo ULN2003. Utilizei um código já existente para controlar o motor em angulo de graus. Basicamente o motor dá 4096 passos para executar uma volta completa então utilizei uma classe para mapear os movimentos utilizando graus.</p>

<p>Para garantir que não iria tirar fotos e girar a camera ao mesmo tempo escrevi um script simples que interopera entre a camera e o motor.</p>

<p>Funcionou legal e é muito simples de trabalhar.</p>

<p>Usei uma <a href="http://blog.scphillips.com/2012/12/a-python-class-to-move-the-stepper-motor/">classe Motor</a> para abstrair a rotação do motor e agora só falta adicionar um fator tempo para poder dizer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Quero que gire 180 graus em 6 horas.
</code></pre></div></div>

<p>Para girar o motor basta importar a classe e usar o método <code class="language-plaintext highlighter-rouge">move_to(angle)</code>.</p>

<pre class="prettyprint">
from motor import Motor

GPIO.setmode(GPIO.BCM)

PINS_ON_ULN = [17,18,23,22]

motor = Motor(PINS_ON_ULN)
motor.rpm = 1
motor.move_to(90)
</pre>

<h2 id="impressora-3d">Impressora 3D</h2>

<p>A engrenagem encontrei na internet e imprimi na impressora 3d. Se quiser baixar o modelo pode ser encontrado <a href="http://www.thingiverse.com/thing:258646">aqui no thingverse</a>.</p>

<p>Também imprimi um <a href="http://www.thingiverse.com/thing:128617">suporte</a> para a camera rpi que coicidentemente encaixou na engrenagem.</p>

<p>Veja o vídeo da câmera rodando:</p>

<iframe src="//instagram.com/p/mSUDgXJzmE/embed/" width="445px" height="535px" frameborder="0" scrolling="no" allowtransparency="true"></iframe>

<h2 id="primeiro-timelapse-girando">Primeiro timelapse girando</h2>

<p>Então mesmo fiz o primeiro timelapse girando. 180 graus em 4 horas. Girou apenas 120 depois a camera descolou e a camera ficou pendurada.</p>

<video src="/images/motolapse.mp4"></video>

<p>Neste caso girou um grau e tirou uma foto, aguardou 64 segundos, girou mais um grau e seguiu repetindo o processo.</p>

</div>
<hr>

<div class="share-page">
  Share &rarr;
  <a href="https://twitter.com/intent/tweet?text=Timelapse girando no Raspberry PI&url=https://ideia.me/rotative-timelapse&via=jonatasdp&related=jonatasdp" rel="nofollow"title="Share on twitter">Twitter</a>
  <a href="https://facebook.com/sharer.php?u=https://ideia.me/rotative-timelapse" rel="nofollow" target="_blank" title="Share on Facebook">Facebook</a>
  <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://ideia.me/rotative-timelapse" rel="nofollow" target="_blank" title="Share on Linkedin">Linkedin</a>
</div>
<hr>
<div class="pagination">
    
      <span class="prev">
        <a href="/desenvolvemos-seu-invento" title="Desenvolvemos seu invento!">&larr; Before</a>
      </span>
    
    | <span><a href="/archive.html">Archive</a></span> |
    
    <span class="next"><a href="/como-gerar-um-video-de-fotos-sequenciais" title="Como gerar um vídeo de fotos sequênciais">Next &rarr;</a></span>
    
</div>
<hr>

<p>
  Hello there, my name is Jônatas Davi Paganini and this is my personal blog.
  <br />
  I'm developer advocate at <a href="https://timescale.com">Timescale</a> and
  I also have a few open source projects on <a href="https://github.com/jonatas">github</a>.
</p>
<p>Check my
  <a href="/talks">talks</a> or connect with me via
  <a href="https://br.linkedin.com/in/jonatasdp" target="_blank">linkedin</a> /
  <a href="https://twitter.com/jonatasdp" target="_blank">twitter</a> /
  <a href="https://github.com/jonatas" target="_blank">github</a> /
  <a href="https://instagram.com/jonatasdp" target="_blank">instagram</a> /
  <a href="https://fb.com/jonatas.paganini" target="_blank">facebook</a> /
  <a href="https://www.strava.com/athletes/12104550" target="_blank">strava</a> /
  <a href="http://www.meetup.com/members/185190193/" target="_blank">meetup</a>.
</p>



    </div>
  </body>
  <script type='text/javascript'>
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-12893758-1");
      pageTracker._trackPageview();
     } catch(err) {}
    </script>
</html>

