
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ideia-me!</title>
    
    <meta name="author" content="Jônatas Davi Paganini">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link id="bootstrap" href="/css/bootstrap.css" rel="stylesheet">
    <link id="bootstrap" href="/css/bootswatch.min.css" rel="stylesheet">
    <link href="/css/nimbus-pygments.css" rel="stylesheet">

    <script src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/bootstrap-dropdown.js"></script>
    <div id="fb-root"></div>

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  <script type="text/javascript" language="javascript" charset="utf-8">
// <![CDATA[
    addEventListener('load', function (event) {
      var agent=navigator.userAgent.toLowerCase();
      var links = document.getElementsByTagName('a');
      var regex = new RegExp('^'+window.location.protocol + '//' + window.location.hostname);

      for (var i = 0, linksLength = links.length; i < linksLength; i++) {
        if ( ! links[i].href.match(regex)) {
           links[i].setAttribute('target', '_blank');
       }
     }

    }, false);
// ]]>
</script>
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.5&appId=138593009602387";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="/">
            <img class="img-circle" alt="ideiame logo" style="padding-top: 6px" src="/images/ideiame.png"></a>
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
           </button>
       </div>
   <div class="navbar-collapse collapse" id="navbar-main">
     <ul class="nav navbar-nav">
      <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Social<b class="caret"></b></a>
            <ul class="dropdown-menu" id="swatch-menu">
              <li><a href="https://github.com/jonatas">Github</a></li>
              <li><a href="https://twitter.com/jonatasdp">Twitter</a></li>
              <li><a href="https://instagram.com/jonatasdp">Instagram</a></li>
              <li><a href="https://www.meetup.com/Floripa-on-Rails/members/185190193/">Meetup</a></li>
              <li><a href="https://www.slideshare.net/jonataspaganini/">SlideShare</a></li>
              <li><a href="https://facebook.com/jonatas.paganini">Facebook</a></li>
              <li><a href="https://www.youtube.com/user/jonatasdp">Youtube</a></li>
           </ul>
          </li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Projects<b class="caret"></b></a>
            <ul class="dropdown-menu">
            <li><a href="https://github.com/jonatas/fast">Fast</a></li>
            <li><a href="http://torf.ideia.me">2015: True Or False Game</a></li>
            <li><a href="http://github.com/jonatas/pixel.ideia.me">2013: Pixel art (collaborative) </a></li>
            <li><a href="http://github.com/jonatas/trybliss">2013: Try Bliss</a</li>
            <li><a href="http://github.com/jonatas/churumelas">2012: Regexp challenges</a></li>
            <li><a href="/camera-overlay">2012: Camera Overlay </a></li>
           </ul>
          </li>
          
          
          


  
    
      
      	
      	<li><a href="/archive">Arquivo</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories">Categorias</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  



          </ul>
        </div>
      </div>
     </div>
    </div>
    <div class="container">
      
<div class="page-header">
  <h1>Ideia-me! </h1>
</div>

<div class="row-fluid">
  <div class="span12">
    
<p>
  Hello there, my name is Jônatas Davi Paganini and this is my personal blog.
  <br />
  I'm developer advocate at <a href="https://timescale.com">Timescale</a> and
  I also have a few open source projects on <a href="https://github.com/jonatas">github</a>.
</p>
<p>Check my
  <a href="/talks">talks</a> or connect with me via
  <a href="https://br.linkedin.com/in/jonatasdp" target="_blank">linkedin</a> /
  <a href="https://twitter.com/jonatasdp" target="_blank">twitter</a> /
  <a href="https://github.com/jonatas" target="_blank">github</a> /
  <a href="https://instagram.com/jonatasdp" target="_blank">instagram</a> /
  <a href="https://fb.com/jonatas.paganini" target="_blank">facebook</a> /
  <a href="https://www.strava.com/athletes/12104550" target="_blank">strava</a> /
  <a href="http://www.meetup.com/members/185190193/" target="_blank">meetup</a>.
</p>

<hr />

<h1 class="post"><a class="post" href="/time-series-benchmark-timescaledb-raspberry-pi"> Time Series Benchmark Timescaledb Raspberry Pi</a></h1>
<p>I started supporting <a href="https://github.com/timescale/tsbs">tsbs</a> project, and
this weekend I decided to try to run it on my Raspberry Pi version 3.</p>

<p>Here I’ll share a bit of my saga to make it work and all the steps I followed to
benchmark Postgresql with <a href="https://docs.timescale.com/">TimescaleDB</a>.</p>

<h2 id="setup-environment">Setup environment</h2>

<p>If you want to try this, the first thing you need to do is download an Ubuntu image to load in your Pi.
I have an old one here, so, I updated it recently with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt dist-upgrade
</code></pre></div></div>

<p>It will take a while and maybe go into some crazy errors. To me, I have to
force it to go.</p>

<h3 id="disable-gui-interface">Disable GUI interface</h3>

<p>We’re just going to access the machine via ssh, so it would be better to have
less process running as possible. As ubuntu mate brings interface enabled by
default, let’s disable it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl set-default multi-user.target --force
systemctl disable lightdm.service --force
systemctl disable graphical.target --force
systemctl disable plymouth.service --force
</code></pre></div></div>

<h3 id="installing-latest-go-version">Installing latest go version</h3>

<p><a href="https://github.com/timescale/tsbs">tsbs</a> is written in go, and we’re going to
build it inside the Raspberry Pi. You can download it with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /tmp
wget https://dl.google.com/go/go1.14.4.linux-armv6l.tar.gz
</code></pre></div></div>

<p>Now, the next step is to extract it into <code class="language-plaintext highlighter-rouge">/usr/local</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo tar -C /usr/local -xzf go1.14.4.linux-armv6l.tar.gz
</code></pre></div></div>

<p>Edit your <code class="language-plaintext highlighter-rouge">~/.profile</code>  to configure <code class="language-plaintext highlighter-rouge">PATH</code> and <code class="language-plaintext highlighter-rouge">GOPATH</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATH=$PATH:/usr/local/go/bin
GOPATH=$HOME/go
</code></pre></div></div>

<p>Now, we still need to create the <code class="language-plaintext highlighter-rouge">GOPATH</code> folder:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir $HOME/go
</code></pre></div></div>

<p>and then we can source the <code class="language-plaintext highlighter-rouge">.profile</code> to reload the configuration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source ~/.profile
</code></pre></div></div>

<p>Now, double-checking the version:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jonatas@rpi-3:~$ go version
go version go1.14.4 Linux/arm
</code></pre></div></div>

<h3 id="running-timescaledb-via-docker">Running timescaledb via docker</h3>

<p>Just make sure you don’t have Postgres running:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo service PostgreSQL stop
</code></pre></div></div>

<h4 id="pulling-timescaledb-official-image">Pulling timescaledb official image</h4>

<p>Now, let’s run the image. It will automatically pull if you don’t have it
locally:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker run --name timescaledb -p 5432:5433 -e POSTGRES_PASSWORD=password timescale/timescaledb:latest-pg12
</code></pre></div></div>

<p>The first time you run it, the <a href="https://docs.timescale.com/timescaledb/latest/how-to-guides/configuration/timescaledb-tune/">timescaledb-tune</a>
will break it, and you’ll need to join the image via ssh and edit the configuration.</p>

<p>The tool outputs the following configuration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start timescaledb
docker exec -i -t timescaledb /bin/bash
</code></pre></div></div>

<p>You can learn more about how to edit the <code class="language-plaintext highlighter-rouge">postgresql.conf</code> inside a
timescale container <a href="https://docs.timescale.com/timescaledb/latest/how-to-guides/configuration/docker-config/">here</a>.</p>

<p>Here are the suggestions from the tool:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shared_buffers = 223094kB
effective_cache_size = 669282kB
maintenance_work_mem = 111547kB
work_mem = 2788kB
timescaledb.max_background_workers = 8
max_worker_processes = 15
max_parallel_workers_per_gather = 2
max_parallel_workers = 4
wal_buffers = 6692kB
min_wal_size = 512MB
default_statistics_target = 500
random_page_cost = 1.1
checkpoint_completion_target = 0.9
max_connections = 20
max_locks_per_transaction = 64
autovacuum_max_workers = 10
autovacuum_naptime = 10
effective_io_concurrency = 200
timescaledb.last_tuned = '2021-05-22T23:23:57Z'
timescaledb.last_tuned_version = '0.11.0'
</code></pre></div></div>

<p>While testing, maybe you’ll end up running it multiple times, but you want to reuse the same name, you can remove the previous image. Here is a snippet for it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker rm $(sudo docker ps -aq --filter name=timescaledb)
</code></pre></div></div>

<p>While it pulls the image, we can get more time to install tsbs and take the
time to compile it.</p>

<h2 id="installing-tsbs">Installing tsbs</h2>

<p>Let’s get the tsbs project:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go get github.com/timescale/tsbs
</code></pre></div></div>

<p>Let’s join the folder:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd $GOPATH/src/github.com/timescale/tsbs
</code></pre></div></div>

<p>Now we can run <code class="language-plaintext highlighter-rouge">make all</code> to compile all the tool we need to benchmark
time-series databases.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make all
</code></pre></div></div>

<p>It will take a while: 10 to 15 minutes in this small hardware, enjoy your favorite drink ☕️</p>

<h2 id="configuring-environment-variables">Configuring environment variables</h2>

<p>Next step is get familiar with the tools and their purpose:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">tsbs_load</code> will let you benchmark the data load into a database (several in the <a href="https://github.com/timescale/tsbs#current-use-cases">list</a>).</li>
  <li><code class="language-plaintext highlighter-rouge">tsbs_run_queries_timescaledb</code> allows you to execute several types of queries widespread in IoT and DevOps ecosystems. <a href="https://github.com/timescale/tsbs#benchmarking-query-execution-performance">more here</a>.</li>
</ul>

<h2 id="running-tsbs">Running tsbs</h2>

<p>First, let’s generate some config to run, so it’s easy to change the variables
instead of keeping a long command line.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tsbs_load config
</code></pre></div></div>

<p>It will generate some config, let me share the one I used here:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data-source:
  # data source type [SIMULATOR|FILE]
  type: SIMULATOR
  # generate data on the fly
  simulator:
    # each time the simulator advances in time it skips this amount of time
    log-interval: 10s
    # maximum number of points to simulate (limit)
    max-data-points: 1000000
    # number of hosts to simulate (each host has a different tag-set/label-set
    scale: 40
    # set seed to some number to have reproducible data be generated
    seed: 135
    # start time of simulation
    timestamp-start: "2021-01-01T10:00:00Z"
    # end time of simulation
    timestamp-end: "2021-01-04T08:00:00Z"
    # use case to simulate
    use-case: cpu-only
loader:
  db-specific:
    admin-db-name: postgres
    # set chunk time depending on server size
    chunk-time: 4h0m0s
    create-metrics-table: true
    field-index: VALUE-TIME
    field-index-count: 0
    force-text-format: false
    host: 0.0.0.0
    user: postgres
    pass: password
    port: 5432
    in-table-partition-tag: false
    log-batches:false
    partition-index: true
    partitions: 1
    postgres: sslmode=prefer
    time-index: true
    time-partition-index: false
    use-hypertable: true
    use-distributed-hypertable: false
    use-jsonb-tags: false
  runner:
    # the simulated data will be sent in batches of 'batch-size' points
    # to each worker
    batch-size: 10000
    # don't worry about this until you need to simulate data with scale &gt; 1000
    channel-capacity: "0"
    db-name: benchmark
    do-abort-on-exist: false
    do-create-db: true
    # set this to false if you want to see the speed of data generation
    do-load: true
    # don't worry about this until you need to simulate data with scale &gt; 1000
    flow-control: false
    hash-workers: true
    limit: 1000000
    reporting-period: 10s
    seed: 135
    workers: 2 
</code></pre></div></div>

<p>Running:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jonatas@rpi-3:~/go/src/github.com/timescale/tsbs$tsbs_load load timescaledb --config config.yaml Using config file: config.yaml
time,per. metric/s,metric total,overall metric/s,per. row/s,row total,overall row/s
%!(EXTRA uint64=10000)panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x125b4]

goroutine 56 [running]:
runtime/internal/atomic.goXadd64(0x2908824, 0x186a0, 0x0, 0x2, 0x2)
	/usr/local/go/src/runtime/internal/atomic/atomic_arm.go:103 +0x1c
github.com/timescale/tsbs/load.(*CommonBenchmarkRunner).work(0x29087e0, 0xc555a0, 0x29ac7c0, 0x2f1a640, 0x29b2928, 0x1)
	/home/jonatas/go/src/github.com/timescale/tsbs/load/loader.go:248 +0x1ec
created by github.com/timescale/tsbs/load.(*CommonBenchmarkRunner).RunBenchmark
	/home/jonatas/go/src/github.com/timescale/tsbs/load/loader.go:160 +0xd8
</code></pre></div></div>

<p>Oh, we got an error :sad panda:</p>

<p>Looks like the error is around <a href="https://github.com/timescale/tsbs/blob/master/load/loader.go#L247">here</a>.</p>

<p>Let’s check if it makes something in the database:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>psql benchmark -h 0.0.0.0 -U postgres
Password for user Postgres:
psql (10.16 (Ubuntu 10.16-0ubuntu0.18.04.1), server 12.6)
WARNING: psql major version 10, server major version 12.
         Some psql features might not work.
Type "help" for help.
</code></pre></div></div>

<p>Checking the tables with <code class="language-plaintext highlighter-rouge">\dt</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>benchmark=# \dt
        List of relations
 Schema | Name | Type  |  Owner
--------+------+-------+----------
 public | CPU  | table | Postgres
 public | tags | table | Postgres
(2 rows)
</code></pre></div></div>

<p>Great! it created the tables  :)</p>

<p>Now, let’s see if it was able to insert something:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>benchmark=# select count(1) from cpu;
 count
-------
 20000
(1 row)

benchmark=# select count(1)  from tags ;
 count
-------
    40
(1 row)
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">40</code> tags as set in the configuration.</p>

<p>Exactly the numbers we have as limits in our system!</p>

<p>Let’s try to understand the error putting one infamous printing line to get what we have in the context:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gd">--- a/load/loader.go
</span><span class="gi">+++ b/load/loader.go
</span><span class="p">@@ -245,6 +245,7 @@</span> func (l *CommonBenchmarkRunner) work(b targets.Benchmark, wg *sync.WaitGroup, c
        for batch := range c.toWorker {
                startedWorkAt := time.Now()
                metricCnt, rowCnt := proc.ProcessBatch(batch, l.DoLoad)
<span class="gi">+               printFn("loaded metricCnt %d with rowCnt %d\n",metricCnt, rowCnt)
</span></code></pre></div></div>

<p>Now, let’s compile tsbs loaders and rerun it. To compile only the loaders
you can use a make task:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make loaders
</code></pre></div></div>

<p>But this task will compile all loaders and on a Raspberry, all resources are
limited. Let’s cherry-pick only the builds we’re using:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make tsbs_load tsbs_load_timescaledb
</code></pre></div></div>

<p>You should see several lines in the output like these:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GO111MODULE=on go get ./cmd/tsbs_load
GO111MODULE=ontsbs_load ./cmd/tsbs_load
GO111MODULE=on go install ./cmd/tsbs_load
GO111MODULE=on go get ./cmd/tsbs_load_timescaledb
GO111MODULE=ontsbs_load_timescaledb ./cmd/tsbs_load_timescaledb
GO111MODULE=on go install ./cmd/tsbs_load_timescaledb
</code></pre></div></div>

<p>Running again:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/tsbs_load load timescaledb --config config.yaml Using config file: config.yaml
time,per. metric/s,metric total,overall metric/s,per. row/s,row total,overall row/s
loaded metricCnt 100000 with rowCnt 10000
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x125b4]
</code></pre></div></div>

<p>Well, looks like the rows are being inserted, but some other pointer reference is
nil.</p>

<p>Wow! Inspecting the <code class="language-plaintext highlighter-rouge">atomic.AddUInt64</code> is responsible for such <a href="https://github.com/golang/go/issues/23345">bug only on
arm</a>. Funny, no? Let’s go deep and
see how it works, because today I can learn about go deeper.</p>

<p>Here <a href="https://golang.org/src/sync/atomic/doc.go?s=1206:1659#L36">is the gift</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    46  // BUG(RSC): On 386, the 64-bit functions use instructions unavailable before the Pentium MMX.
    47  //
    48  // On non-Linux ARM, the 64-bit functions use instructions unavailable before the ARMv6k core.
    49  //
    50  // On ARM, 386, and 32-bit MIPS, it is the caller's responsibility
    51  // to arrange for 64-bit alignment of 64-bit words accessed atomically.
    52  // The first word in a variable or in an allocated struct, array, or slice can
    53  // be relied upon to be 64-bit aligned.
</code></pre></div></div>

<p>Now, I see that I need to find another way to implement this small counter.
Funny that I just want to sum two integers 🙀</p>

<p>Then, navigating in the issue details, I discovered this article about
<a href="https://go101.org/article/memory-layout.html">Type Alignment Guarantees</a>, the memory layout, which makes me learn many low-level things.</p>

<p>Wow! I’m not going that far if I cannot change this counter to make it run.</p>

<p>Let’s go! If you checked the previous post, you’ll see this <code class="language-plaintext highlighter-rouge">Counter</code> with a bit sized alignment that makes it possible to use <code class="language-plaintext highlighter-rouge">AddUInt64</code> without failures:</p>

<p>Here are the most important changes to make tsbs run with ARM 32bits environment:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// Some hacks to run on ARM 32 bits platforms</span>
<span class="c">// see: https://go101.org/article/memory-layout.html</span>
<span class="k">type</span> <span class="n">Counter</span> <span class="k">struct</span> <span class="p">{</span>
       <span class="n">x</span> <span class="p">[</span><span class="m">15</span><span class="p">]</span><span class="kt">byte</span> <span class="c">// instead of "x uint64"</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">Counter</span><span class="p">)</span> <span class="n">xAddr</span><span class="p">()</span> <span class="o">*</span><span class="kt">uint64</span> <span class="p">{</span>
       <span class="c">// The return must be 8-byte aligned.</span>
       <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="kt">uint64</span><span class="p">)(</span><span class="n">unsafe</span><span class="o">.</span><span class="n">Pointer</span><span class="p">(</span>
               <span class="p">(</span><span class="kt">uintptr</span><span class="p">(</span><span class="n">unsafe</span><span class="o">.</span><span class="n">Pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="m">7</span><span class="p">)</span> <span class="o">/</span> <span class="m">8</span> <span class="o">*</span> <span class="m">8</span><span class="p">))</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">Counter</span><span class="p">)</span> <span class="n">Add</span><span class="p">(</span><span class="n">delta</span> <span class="kt">uint64</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">p</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">xAddr</span><span class="p">()</span>
       <span class="n">atomic</span><span class="o">.</span><span class="n">AddUint64</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">Counter</span><span class="p">)</span> <span class="n">Value</span><span class="p">()</span> <span class="kt">uint64</span> <span class="p">{</span>
       <span class="k">return</span> <span class="n">atomic</span><span class="o">.</span><span class="n">LoadUint64</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">xAddr</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Now we need to change CommonBenchmarkRunner to use our Counter instead of
<code class="language-plaintext highlighter-rouge">uint64</code> for the <code class="language-plaintext highlighter-rouge">metricCnt</code> and <code class="language-plaintext highlighter-rouge">rowCnt</code>.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // CommonBenchmarkRunner is responsible for initializing and storing common
 // flags across all database systems and ultimately running a supplied Benchmark
 type CommonBenchmarkRunner struct {
        BenchmarkRunnerConfig
<span class="gd">-       metricCnt      uint64
-       rowCnt         uint64
</span><span class="gi">+       metricCnt      Counter
+       rowCnt         Counter
</span>        initialRand    *rand.Rand
        sleepRegulator insertstrategy.SleepRegulator
 }
</code></pre></div></div>

<p>Later, in the call, we use the <code class="language-plaintext highlighter-rouge">.Add</code> method that do the bit alignment between
the 32 and 64 bits parity:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code> @@ -245,8 +267,8 @@ func (l *CommonBenchmarkRunner) work(b targets.Benchmark, wg *sync.WaitGroup, c
        for batch := range c.toWorker {
                startedWorkAt := time.Now()
                metricCnt, rowCnt := proc.ProcessBatch(batch, l.DoLoad)
<span class="gd">-               atomic.AddUint64(&amp;l.metricCnt, metricCnt)
-               atomic.AddUint64(&amp;l.rowCnt, rowCnt)
</span><span class="gi">+               l.metricCnt.Add(metricCnt)
+               l.rowCnt.Add(rowCnt)
</span>                c.sendToScanner()
                l.timeToSleep(workerNum, startedWorkAt)
</code></pre></div></div>

<p>And, then we just need to use <code class="language-plaintext highlighter-rouge">.Value()</code> to rescue the uint64 value again.</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@@ -268,12 +290,12 @@</span> func (l *CommonBenchmarkRunner) timeToSleep(workerNum uint, startedWorkAt time.T

 // summary prints the summary of statistics from loading
 func (l *CommonBenchmarkRunner) summary(took time.Duration) {
<span class="gd">-       metricRate := float64(l.metricCnt) / took.Seconds()
</span><span class="gi">+       metricRate := float64(l.metricCnt.Value()) / took.Seconds()
</span>        printFn("\nSummary:\n")
<span class="gd">-       printFn("loaded %d metrics in %0.3fsec with %d workers (mean rate %0.2f metrics/sec)\n", l.metricCnt, took.Seconds(), l.Workers, metricRate)
-       if l.rowCnt &gt; 0 {
-               rowRate := float64(l.rowCnt) / float64(took.Seconds())
-               printFn("loaded %d rows in %0.3fsec with %d workers (mean rate %0.2f rows/sec)\n", l.rowCnt, took.Seconds(), l.Workers, rowRate)
</span><span class="gi">+       printFn("loaded %d metrics in %0.3fsec with %d workers (mean rate %0.2f metrics/sec)\n", l.metricCnt.Value(), took.Seconds(), l.Workers, metricRate)
+       if l.rowCnt.Value() &gt; 0 {
+               rowRate := float64(l.rowCnt.Value()) / float64(took.Seconds())
+               printFn("loaded %d rows in %0.3fsec with %d workers (mean rate %0.2f rows/sec)\n", l.rowCnt.Value(), took.Seconds(), l.Workers, rowRate)
</span>        }
 }
</code></pre></div></div>

<p>Now, after compiling it again, it’s time to see it in action.</p>

<h2 id="tsbs_load-results">tsbs_load results</h2>

<p>First thing to remind here is that I’m going to do a few tests scenarios here:</p>

<ol>
  <li>Run tsbs and PostgreSQL inside the same Raspberry PI</li>
  <li>Run tsbs from my Macbook and PostgreSQL on Raspberry PI using my local
network</li>
</ol>

<h3 id="running-tsbs-directly-inside-the-raspberry-pi">Running TSBS directly inside the Raspberry PI</h3>

<p>In the Raspberry PI console, go to <code class="language-plaintext highlighter-rouge">tsbs</code> folder and run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/tsbs_load load timescaledb --config config.yaml

Using config file: config.yaml
time,per. metric/s,metric total,overall metric/s,per. row/s,row total,overall row/s
1621732292,119996.91,1.200000E+06,119996.91,11999.69,1.200000E+05,11999.69
1621732302,120001.86,2.400000E+06,119999.39,12000.19,2.400000E+05,11999.94
1621732312,139997.19,3.800000E+06,126665.39,13999.72,3.800000E+05,12666.54
1621732322,139998.06,5.200000E+06,129998.57,13999.81,5.200000E+05,12999.86
1621732332,129821.72,6.500000E+06,129963.16,12982.17,6.500000E+05,12996.32
1621732342,120168.22,7.700000E+06,128332.96,12016.82,7.700000E+05,12833.30
1621732352,119854.13,8.900000E+06,127120.44,11985.41,8.900000E+05,12712.04

Summary:
loaded 9999990 metrics in 79.997sec with 2 workers (mean rate 125004.61 metrics/sec)
loaded 999999 rows in 79.997sec with 2 workers (mean rate 12500.46 rows/sec)
</code></pre></div></div>

<p>Not bad! 1M rows in 80 seconds!</p>

<h3 id="running-tsbs-from-an-external-machine">Running tsbs from an external machine</h3>

<p>Let’s try to move to outside of the Raspberry PI just to not have
the overload of <code class="language-plaintext highlighter-rouge">tsbs_load</code> and configure it to insert in my Raspberry PI
from my local network.</p>

<p>Sharing a bit of my setup, I’m running it from my Macbook that is connected via
wi-fi to a modem and the Raspberry PI is connected via cable in the modem.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp -r jonatas@rpi-cable:~/go/src/github.com/timescale/tsbs/config.yaml ./
</code></pre></div></div>

<p>Now I’ll change the <code class="language-plaintext highlighter-rouge">host</code> from <code class="language-plaintext highlighter-rouge">0.0.0.0</code> to <code class="language-plaintext highlighter-rouge">rpi-cable</code> that is mapping the
actual IP via <code class="language-plaintext highlighter-rouge">/etc/hosts</code>.</p>

<p>Also change the <code class="language-plaintext highlighter-rouge">config.yaml</code> file host to the <code class="language-plaintext highlighter-rouge">rpi-cable</code> name.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">host</span><span class="pi">:</span> <span class="s">rpi-cable</span>
</code></pre></div></div>

<p>Running:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/tsbs_load load timescaledb --config /tmp/config.yaml
Using config file: /tmp/config.yaml
time,per. metric/s,metric total,overall metric/s,per. row/s,row total,overall row/s
1621733399,129933.24,1.300000E+06,129933.24,12993.32,1.300000E+05,12993.32
1621733409,230105.42,3.600000E+06,179994.99,23010.54,3.600000E+05,17999.50
1621733419,210010.39,5.700000E+06,189999.61,21001.04,5.700000E+05,18999.96
1621733429,209999.13,7.800000E+06,194999.50,20999.91,7.800000E+05,19499.95

Summary:
loaded 9999990 metrics in 48.649sec with 4 workers (mean rate 205553.49 metrics/sec)
loaded 999999 rows in 48.649sec with 4 workers (mean rate 20555.35 rows/sec)
</code></pre></div></div>

<p>Much better! 1M rows in 48 seconds!</p>

<p>When we do benchmarks at Timescale, we generally setup two machines in the cloud
to guarantee we’ll not have interference of any process and have only the main
Postgres process running. As I’m just having fun in the weekend, I was curious
about understanding the load of <code class="language-plaintext highlighter-rouge">tsbs</code> and the interference in a small hardware.</p>

<p>In this case the interference is pretty clear, getting 60% more performance
after removing the competition between tsbs and the PostgreSQL working on
loading the data.</p>

<h2 id="tsbs_queries-results">tsbs_queries results</h2>

<p>Trying to run tsbs queries from the Raspberry will force me to change all the
code to work with the new counter and I see it will not be a good idea, so
let’s run only from the outside, which seems closer to a real server scenario.</p>

<p>I love to use the <a href="https://github.com/timescale/tsbs/blob/master/scripts/full_cycle_minitest/full_cycle_minitest_timescaledb.sh">full_minicycle_timescaledb</a>
script that is the shortest path to have a full scenario of loading + using several queries over the DB.</p>

<p>Here is the command to run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>env HOST=rpi-cable PASSWORD=password ./full_cycle_minitest_timescaledb.sh
</code></pre></div></div>
<p>I hacked the first line of the bash script to be <code class="language-plaintext highlighter-rouge">bash -x</code> to expose all commands used in the script. So, first, it generates a lot of data:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+ mkdir -p /tmp/bulk_data
+ tsbs_generate_data --format timescaledb --use-case cpu-only --scale 4 --seed 123 --file /tmp/bulk_data/timescaledb_data
+ tsbs_generate_queries --queries=1000 --format timescaledb --use-case cpu-only --scale 4 --seed 123 --query-type lastpoint --file /tmp/bulk_data/timescaledb_query_lastpoint
TimescaleDB last row per host: 1000 points
+ tsbs_generate_queries --queries=1000 --format timescaledb --use-case cpu-only --scale 4 --seed 123 --query-type cpu-max-all-1 --file /tmp/bulk_data/timescaledb_query_cpu-max-all-1
TimescaleDB max of all CPU metrics, random    1 hosts, random 8h0m0s by 1h: 1000 points
+ tsbs_generate_queries --queries=1000 --format timescaledb --use-case cpu-only --scale 4 --seed 123 --query-type high-cpu-1 --file /tmp/bulk_data/timescaledb_query_high-cpu-1
TimescaleDB CPU over threshold, 1 host(s): 1000 points
</code></pre></div></div>

<p>The next step loads a short amount of metrics to test the inserts as we did before with the <code class="language-plaintext highlighter-rouge">tsbs_load</code> command, but using the YAML config. It also accepts command line parameters:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+ tsbs_load_timescaledb --pass=password '--postgres=sslmode=disable port=5432' --db-name=benchmark --host=rpi-cable --user=postgres --workers=1 --file=/tmp/bulk_data/timescaledb_data
time,per. metric/s,metric total,overall metric/s,per. row/s,row total,overall row/s

Summary:
loaded 345600 metrics in 5.844sec with 1 workers (mean rate 59134.26 metrics/sec)
loaded 34560 rows in 5.844sec with 1 workers (mean rate 5913.43 rows/sec)
</code></pre></div></div>

<p>And then it starts loading the queries part with previously generated queries:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+ tsbs_run_queries_timescaledb --max-rps=0 --hdr-latencies=0rps_timescaledb_query_lastpoint.hdr --pass=password '--postgres=sslmode=disable port=5432' --db-name=benchmark --hosts=rpi-cable --user=postgres --workers=1 --max-queries=1000 --file=/tmp/bulk_data/timescaledb_query_lastpoint
After 100 queries with 1 workers:
Interval query rate: 62.68 queries/sec	Overall query rate: 62.68 queries/sec
TimescaleDB last row per host:
min:     5.10ms, med:     6.51ms, mean:    15.93ms, max:  209.67ms, stddev:    24.06ms, sum:   1.6sec, count: 100
all queries                  :
min:     5.10ms, med:     6.51ms, mean:    15.93ms, max:  209.67ms, stddev:    24.06ms, sum:   1.6sec, count: 100
...
Run complete after 1000 queries with 1 workers (Overall query rate 61.99 queries/sec):
TimescaleDB last row per host:
min:     4.42ms, med:     6.75ms, mean:    16.05ms, max:  209.67ms, stddev:    17.46ms, sum:  16.1sec, count: 1000
all queries                  :
min:     4.42ms, med:     6.75ms, mean:    16.05ms, max:  209.67ms, stddev:    17.46ms, sum:  16.1sec, count: 1000
Saving High Dynamic Range (HDR) Histogram of Response Latencies to 0rps_timescaledb_query_lastpoint.hdr
wall clock time: 16.185718sec
+tsbs_run_queries_timescaledb --max-rps=0 --hdr-latencies=0rps_timescaledb_query_cpu-max-all-1.hdr --pass=password '--postgres=sslmode=disable port=5432' --db-name=benchmark --hosts=rpi-cable --user=postgres --workers=1 --max-queries=1000 --file=/tmp/bulk_data/timescaledb_query_cpu-max-all-1
After 100 queries with 1 workers:
</code></pre></div></div>

<p>Note the second line in this previous output:</p>

<p><strong>TimescaleDB last row per host:</strong></p>

<p>So, the <a href="https://github.com/timescale/tsbs/blob/1ac5e93c6758979e5a25de92eaafddc0c4612e5b/cmd/tsbs_generate_queries/databases/timescaledb/devops.go#L218-L231">query</a> is checking something like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT DISTINCT ON (hostname) * FROM CPU ORDER BY hostname, time DESC
</code></pre></div></div>

<p>Continuing to the following query:</p>

<p><strong>TimescaleDB max of all CPU metrics, random    1 hosts, random 8h0m0s by 1h:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Interval query rate: 12.76 queries/sec	Overall query rate: 12.76 queries/sec
TimescaleDB max of all CPU metrics, random    1 hosts, random 8h0m0s by 1h:
min:    47.42ms, med:    71.53ms, mean:    78.32ms, max:  186.71ms, stddev:    27.65ms, sum:   7.8sec, count: 100
...
Run complete after 1000 queries with 1 workers (Overall query rate 12.09 queries/sec):
TimescaleDB max of all CPU metrics, random    1 hosts, random 8h0m0s by 1h:
min:    44.31ms, med:    78.26ms, mean:    82.71ms, max:  836.25ms, stddev:    38.17ms, sum:  82.7sec, count: 1000
wall clock time: 82.804588sec
</code></pre></div></div>

<p><strong>TimescaleDB CPU over threshold, 1 host(s):</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+ tsbs_run_queries_timescaledb --max-rps=0 --hdr-latencies=0rps_timescaledb_query_high-cpu-1.hdr --pass=password '--postgres=sslmode=disable port=5432' --db-name=benchmark --hosts=rpi-cable --user=postgres --workers=1 --max-queries=1000 --file=/tmp/bulk_data/timescaledb_query_high-cpu-1
After 100 queries with 1 workers:
Interval query rate: 11.28 queries/sec	Overall query rate: 11.28 queries/sec
TimescaleDB CPU over threshold, 1 host(s):
min:    23.80ms, med:    84.60ms, mean:    88.61ms, max:  235.81ms, stddev:    41.83ms, sum:   8.9sec, count: 100
...
After 400 queries with 1 workers:
Run complete after 1000 queries with 1 workers (Overall query rate 15.51 queries/sec):
TimescaleDB CPU over threshold, 1 host(s):
min:    21.90ms, med:    57.68ms, mean:    64.47ms, max:  942.30ms, stddev:    40.32ms, sum:  64.5sec, count: 1000
Saving High Dynamic Range (HDR) Histogram of Response Latencies to 0rps_timescaledb_query_high-cpu-1.hdr
wall clock time: 64.562662sec
</code></pre></div></div>

<p>As we can see, a simple Raspberry Pi can give us some good insights into how powerful is TimescaleDB even running on small hardware.</p>

<p>Just kidding, this is just my initial attempts with low a small set to see how
small and accessible hardware can be working with all these great technologies.</p>

<p>The speed seems to be reasonably good to 4 cores of 1.2Ghz and 1GB of RAM.</p>

<p>That’s all for Saturday night hacking! Thanks for reading 🤗</p>

<hr />

<ul class="posts">
 
  <li><span class="post_date">24 May 2021</span> &raquo;<a class="post" href="/time-series-benchmark-timescaledb-raspberry-pi">Time Series Benchmark Timescaledb Raspberry Pi</a></li>
 
  <li><span class="post_date">21 May 2021</span> &raquo;<a class="post" href="/ssh-connection-refused">SSH connection refused</a></li>
 
  <li><span class="post_date">14 May 2021</span> &raquo;<a class="post" href="/my-first-month-at-timescale">My first month at Timescale</a></li>
 
  <li><span class="post_date">17 Apr 2021</span> &raquo;<a class="post" href="/my-first-week-at-timescale">My first week at Timescale</a></li>
 
  <li><span class="post_date">23 Feb 2019</span> &raquo;<a class="post" href="/complex-ast-search-with-ruby">Complex AST search with Ruby</a></li>
 
  <li><span class="post_date">06 Jan 2019</span> &raquo;<a class="post" href="/image-processing-with-rmagick">Image processing with Ruby</a></li>
 
  <li><span class="post_date">30 Dec 2018</span> &raquo;<a class="post" href="/retrospective-2018">Retrospective 2018</a></li>
 
  <li><span class="post_date">21 Dec 2017</span> &raquo;<a class="post" href="/retrospective-2017">Retrospective 2017</a></li>
 
  <li><span class="post_date">30 Nov 2017</span> &raquo;<a class="post" href="/customize-rubocop-layout-class-structure-cop">Customize RuboCop Layout/ClassStructure cop</a></li>
 
  <li><span class="post_date">21 Nov 2017</span> &raquo;<a class="post" href="/the-dynamic-experiment-initiative">The dynamic experiment initiative</a></li>
 
  <li><span class="post_date">04 Aug 2017</span> &raquo;<a class="post" href="/adventures-on-automated-code-replacement">Adventures on automated code replacement</a></li>
 
  <li><span class="post_date">20 Jul 2017</span> &raquo;<a class="post" href="/my-nomad-life">My nomad life</a></li>
 
  <li><span class="post_date">31 May 2017</span> &raquo;<a class="post" href="/parsing-ruby-code">Parsing Ruby Code</a></li>
 
  <li><span class="post_date">20 May 2017</span> &raquo;<a class="post" href="/search-in-ruby-ast">Search in Ruby AST</a></li>
 
  <li><span class="post_date">13 Aug 2016</span> &raquo;<a class="post" href="/ruby-puzzle-gridlock">Gridlock game - solving with Ruby</a></li>
 
  <li><span class="post_date">27 Jul 2016</span> &raquo;<a class="post" href="/trabalhar-sozinho-ou-contribuir">Trabalhar sozinho ou contribuir?</a></li>
 
  <li><span class="post_date">05 Jun 2016</span> &raquo;<a class="post" href="/the-dev-conf-sp-2016">TDC SP 2016 here we go :)</a></li>
 
  <li><span class="post_date">22 May 2016</span> &raquo;<a class="post" href="/pessoas-codigos-comunicacao">Pessoas, códigos, comunicação</a></li>
 
  <li><span class="post_date">17 Apr 2016</span> &raquo;<a class="post" href="/introducao-linguagem-ruby">Introdução a linguagem Ruby</a></li>
 
  <li><span class="post_date">01 Apr 2016</span> &raquo;<a class="post" href="/programar-e-uma-droga">Programar é uma droga</a></li>
 
  <li><span class="post_date">25 Mar 2016</span> &raquo;<a class="post" href="/tdc-online">TDC Online! Here we go!</a></li>
 
  <li><span class="post_date">24 Mar 2016</span> &raquo;<a class="post" href="/google-cloud-platform">Google Cloud Platform</a></li>
 
  <li><span class="post_date">22 Mar 2016</span> &raquo;<a class="post" href="/automate-first">Automatize primeiro</a></li>
 
  <li><span class="post_date">19 Mar 2016</span> &raquo;<a class="post" href="/lorenzo-ideia-me-no-ar">lorenzo.ideia.me no ar!</a></li>
 
  <li><span class="post_date">16 Mar 2016</span> &raquo;<a class="post" href="/comecando-com-go-lang">Começando com GO Lang</a></li>
 
  <li><span class="post_date">15 Mar 2016</span> &raquo;<a class="post" href="/vim-basico-para-ruby">Vim básico para trabalhar com Ruby</a></li>
 
  <li><span class="post_date">14 Mar 2016</span> &raquo;<a class="post" href="/fish-shell">Fish shell</a></li>
 
  <li><span class="post_date">14 Mar 2016</span> &raquo;<a class="post" href="/buscando-com-silver-searcher-aka-ag">Buscando com silver searcher</a></li>
 
  <li><span class="post_date">22 Feb 2016</span> &raquo;<a class="post" href="/um-ano-na-resultados-digitais">Primeiro Ano na RD</a></li>
 
  <li><span class="post_date">14 Feb 2016</span> &raquo;<a class="post" href="/podcast-boa-noite-lorenzo">Podcast Boa Noite Lorenzo</a></li>
 
  <li><span class="post_date">05 Dec 2015</span> &raquo;<a class="post" href="/vida-de-bike">Vida de bike</a></li>
 
  <li><span class="post_date">15 Nov 2015</span> &raquo;<a class="post" href="/railsrumble-2015">Rails Rumble 2015</a></li>
 
  <li><span class="post_date">27 Sep 2015</span> &raquo;<a class="post" href="/coffeescript-rocks">Coffeescript rocks</a></li>
 
  <li><span class="post_date">10 Sep 2015</span> &raquo;<a class="post" href="/from-linux-to-os-x">Migrando do linux para o Mac OS X</a></li>
 
  <li><span class="post_date">28 Aug 2015</span> &raquo;<a class="post" href="/tutorial-programacao-3D-openscad">Programação 3D com OpenSCad</a></li>
 
  <li><span class="post_date">24 Aug 2015</span> &raquo;<a class="post" href="/6-meses-na-resultados-digitais">6 meses na Resultados Digitais</a></li>
 
  <li><span class="post_date">14 Jul 2015</span> &raquo;<a class="post" href="/TDC-SP-here-we-go">TDC SP here we go :)</a></li>
 
  <li><span class="post_date">01 Jun 2015</span> &raquo;<a class="post" href="/vida-de-busao">Vida de busão</a></li>
 
  <li><span class="post_date">28 May 2015</span> &raquo;<a class="post" href="/perguntas-do-meu-filho-de-3-anos">Perguntas do meu filho de 3 anos</a></li>
 
  <li><span class="post_date">26 May 2015</span> &raquo;<a class="post" href="/tres-meses-na-resultados-digitais">Três meses na Resultados Digitais</a></li>
 
  <li><span class="post_date">04 Apr 2015</span> &raquo;<a class="post" href="/produto-ou-servico">Produto ou serviço?</a></li>
 
  <li><span class="post_date">23 Mar 2015</span> &raquo;<a class="post" href="/primeiro-mes-na-resultados-digitais">Primeiro mês na Resultados Digitais</a></li>
 
  <li><span class="post_date">01 Mar 2015</span> &raquo;<a class="post" href="/primeira-semana-na-resultados-digitais">Primeira semana na Resultados Digitais</a></li>
 
  <li><span class="post_date">23 Dec 2014</span> &raquo;<a class="post" href="/retrospectiva-2014">Retrospectiva 2014</a></li>
 
  <li><span class="post_date">27 Oct 2014</span> &raquo;<a class="post" href="/blog-da-inventto">Blog da invent.to</a></li>
 
  <li><span class="post_date">22 Apr 2014</span> &raquo;<a class="post" href="/raspibian-sem-mouse">Raspibian sem mouse</a></li>
 
  <li><span class="post_date">09 Apr 2014</span> &raquo;<a class="post" href="/coisas-legais-para-fazer-com-o-rpi">Coisas legais para fazer com o Raspberry PI</a></li>
 
  <li><span class="post_date">07 Apr 2014</span> &raquo;<a class="post" href="/bone-debian-rodando-no-beaglebone-black">Bone Debian rodando no BeagleBone Black</a></li>
 
  <li><span class="post_date">03 Apr 2014</span> &raquo;<a class="post" href="/como-gerar-um-video-de-fotos-sequenciais">Como gerar um vídeo de fotos sequênciais</a></li>
 
  <li><span class="post_date">01 Apr 2014</span> &raquo;<a class="post" href="/rotative-timelapse">Timelapse girando no Raspberry PI</a></li>
 
  <li><span class="post_date">29 Jan 2014</span> &raquo;<a class="post" href="/desenvolvemos-seu-invento">Desenvolvemos seu invento!</a></li>
 
  <li><span class="post_date">23 Dec 2013</span> &raquo;<a class="post" href="/retrospectiva-2013">Retrospectiva 2013</a></li>
 
  <li><span class="post_date">21 Oct 2013</span> &raquo;<a class="post" href="/re-inventto-esta-no-ar">ReInvent.to está no ar!</a></li>
 
  <li><span class="post_date">16 Oct 2013</span> &raquo;<a class="post" href="/railsrumble-vem-ai">Rails Rumble vem aí</a></li>
 
  <li><span class="post_date">29 Jul 2013</span> &raquo;<a class="post" href="/diversidade-e-riqueza">A diversidade é a riqueza</a></li>
 
  <li><span class="post_date">27 Jul 2013</span> &raquo;<a class="post" href="/site-arteterapia-no-ar">Arteterapia no ar!</a></li>
 
  <li><span class="post_date">23 Jul 2013</span> &raquo;<a class="post" href="/o-que-tira-meu-tempo">O que tira o meu tempo?</a></li>
 
  <li><span class="post_date">28 Jun 2013</span> &raquo;<a class="post" href="/pensando-no-futuro">Pensando No Futuro</a></li>
 
  <li><span class="post_date">26 Jun 2013</span> &raquo;<a class="post" href="/bliss-ideia-me-no-ar">Bliss ideia.me está no ar!</a></li>
 
  <li><span class="post_date">10 Jun 2013</span> &raquo;<a class="post" href="/o-que-ando-ideiando">O que ando fazendo nos últimos dias</a></li>
 
  <li><span class="post_date">05 May 2013</span> &raquo;<a class="post" href="/fim-de-semana-bliss">Fim de semana bliss</a></li>
 
  <li><span class="post_date">01 May 2013</span> &raquo;<a class="post" href="/git-post-receive">Git Post Receive</a></li>
 
  <li><span class="post_date">24 Apr 2013</span> &raquo;<a class="post" href="/migrando-estilo-para-twitter-bootstrap">Jekyll e Twitter Bootstrap</a></li>
 
  <li><span class="post_date">18 Apr 2013</span> &raquo;<a class="post" href="/observando-a-memoria-ruby">Observando a memória no ruby</a></li>
 
  <li><span class="post_date">18 Apr 2013</span> &raquo;<a class="post" href="/experiencias-meteor">Experiências com o Meteor js</a></li>
 
  <li><span class="post_date">08 Apr 2013</span> &raquo;<a class="post" href="/pixel-no-ar">Pixel no ar!</a></li>
 
  <li><span class="post_date">01 Apr 2013</span> &raquo;<a class="post" href="/flu-ideia-me-no-ar">Flu.ideia.me no ar!</a></li>
 
  <li><span class="post_date">05 Mar 2013</span> &raquo;<a class="post" href="/concentracao-na-era-da-distracao">Concentração na era da distração</a></li>
 
  <li><span class="post_date">14 Dec 2012</span> &raquo;<a class="post" href="/retro-2012">Retrospectiva 2012</a></li>
 
  <li><span class="post_date">03 Dec 2012</span> &raquo;<a class="post" href="/moving-the-homeoffice">Home office de mudança</a></li>
 
  <li><span class="post_date">24 Nov 2012</span> &raquo;<a class="post" href="/efetivamente">Efetivamente....</a></li>
 
  <li><span class="post_date">11 Nov 2012</span> &raquo;<a class="post" href="/meu-filho-ja-vai-fazer-um-ano">Meu primeiro filho e seu primeiro ano</a></li>
 
  <li><span class="post_date">11 Nov 2012</span> &raquo;<a class="post" href="/arteterapia-begins">Arteterapia o início</a></li>
 
  <li><span class="post_date">08 Nov 2012</span> &raquo;<a class="post" href="/churumelas-no-ar">Não me venha com churumelas!</a></li>
 
  <li><span class="post_date">18 Oct 2012</span> &raquo;<a class="post" href="/rails-rumble-se-foi-e-churumelas-esta-no-ar">Como foi a Rails Rumble 2012</a></li>
 
  <li><span class="post_date">01 Oct 2012</span> &raquo;<a class="post" href="/rails-rumble-ideias">Ideias sobre o Rails Rumble</a></li>
 
  <li><span class="post_date">13 Sep 2012</span> &raquo;<a class="post" href="/os-programadores-do-futuro">Os programadores do futuro</a></li>
 
  <li><span class="post_date">23 May 2012</span> &raquo;<a class="post" href="/disciplina-no-home-office">Disciplina no home office</a></li>
 
  <li><span class="post_date">08 May 2012</span> &raquo;<a class="post" href="/galaxy-note-n7000">Sansung Galaxy Note N7000</a></li>
 
  <li><span class="post_date">09 Apr 2012</span> &raquo;<a class="post" href="/update-ou-upgrade-parte-2">Update ou upgrade parte 2</a></li>
 
  <li><span class="post_date">01 Apr 2012</span> &raquo;<a class="post" href="/cursando-aulas-da-stanford">Cursando aulas da Stanford University</a></li>
 
  <li><span class="post_date">30 Mar 2012</span> &raquo;<a class="post" href="/terminal-life">Vida no terminal</a></li>
 
  <li><span class="post_date">29 Mar 2012</span> &raquo;<a class="post" href="/update-ou-upgrade">Update ou upgrade</a></li>
 
  <li><span class="post_date">25 Mar 2012</span> &raquo;<a class="post" href="/usabilidade-versus-simplicidade">Usabilidade versus simplicidade</a></li>
 
  <li><span class="post_date">13 Mar 2012</span> &raquo;<a class="post" href="/camera-overlay-open-source">Câmera Overlay Open Source</a></li>
 
  <li><span class="post_date">08 Mar 2012</span> &raquo;<a class="post" href="/chave-dicotomica-android">Chave Dicotômica</a></li>
 
  <li><span class="post_date">07 Mar 2012</span> &raquo;<a class="post" href="/pequenas-decisoes-grandes-mudancas">Pequenas mudanças e grandes decisões</a></li>
 
  <li><span class="post_date">27 Feb 2012</span> &raquo;<a class="post" href="/camera-overlay">Camera Overlay</a></li>
 
  <li><span class="post_date">12 Jul 2010</span> &raquo;<a class="post" href="/sinceridade-nao-faz-mal-a-ninguem">Sinceridade não faz mal a ninguém</a></li>
 
  <li><span class="post_date">07 Jul 2010</span> &raquo;<a class="post" href="/ingles-legal">Inglês Legal</a></li>
 
  <li><span class="post_date">30 Jun 2010</span> &raquo;<a class="post" href="/problemas-no-software">Problemas no software e hardware</a></li>
 
  <li><span class="post_date">27 Jun 2010</span> &raquo;<a class="post" href="/cognitividade-da-interface">Cognitividade da Interface</a></li>
 
  <li><span class="post_date">18 Jun 2010</span> &raquo;<a class="post" href="/ipad-chegou">Meu iPad Chegou!</a></li>
 
  <li><span class="post_date">11 Jun 2010</span> &raquo;<a class="post" href="/palestra-sobre-ruby-e-rails">Palestra na Vizivali</a></li>
 
  <li><span class="post_date">30 May 2010</span> &raquo;<a class="post" href="/sh-legal">SH Legal</a></li>
 
  <li><span class="post_date">21 May 2010</span> &raquo;<a class="post" href="/sistemas-operacionais-gerencia-processador-pt1">Sistemas Operacionais - Gerência do processador - parte 1</a></li>
 
  <li><span class="post_date">19 May 2010</span> &raquo;<a class="post" href="/javascript-legal">Javascript Ninja Legal</a></li>
 
  <li><span class="post_date">18 May 2010</span> &raquo;<a class="post" href="/iteracao-legal">Iteração legal</a></li>
 
  <li><span class="post_date">16 May 2010</span> &raquo;<a class="post" href="/coffeescript-legal">Coffeescript Legal</a></li>
 
  <li><span class="post_date">13 May 2010</span> &raquo;<a class="post" href="/servicos-google-api">Google Api</a></li>
 
  <li><span class="post_date">13 May 2010</span> &raquo;<a class="post" href="/linguagens-e-o-mundo">As linguagens e o mundo</a></li>
 
  <li><span class="post_date">05 May 2010</span> &raquo;<a class="post" href="/google-legal">Nova roda mágica do google</a></li>
 
  <li><span class="post_date">03 May 2010</span> &raquo;<a class="post" href="/ruby-legal">Ruby Legal</a></li>
 
  <li><span class="post_date">03 May 2010</span> &raquo;<a class="post" href="/google-buzz-api-no-ideiame">Integrando API do Google Buzz no Ideia.me</a></li>
 
  <li><span class="post_date">29 Apr 2010</span> &raquo;<a class="post" href="/find-exec">Usufruindo do comando find do Unix</a></li>
 
  <li><span class="post_date">27 Apr 2010</span> &raquo;<a class="post" href="/curriculo-jonatas-davi-paganini">Jônatas Davi Paganini</a></li>
 
  <li><span class="post_date">21 Apr 2010</span> &raquo;<a class="post" href="/diario-de-um-feriado">Diário de um feriado</a></li>
 
  <li><span class="post_date">18 Apr 2010</span> &raquo;<a class="post" href="/novas-cores-no-site">Novas cores no site</a></li>
 
  <li><span class="post_date">31 Mar 2010</span> &raquo;<a class="post" href="/weborb-active-record">WebOrb + ActiveRecord</a></li>
 
  <li><span class="post_date">25 Mar 2010</span> &raquo;<a class="post" href="/a-importancia-dos-baby-steps">A importância dos baby steps</a></li>
 
  <li><span class="post_date">22 Mar 2010</span> &raquo;<a class="post" href="/helplate">Helplate = Help + Template</a></li>
 
  <li><span class="post_date">04 Mar 2010</span> &raquo;<a class="post" href="/modos-so">Aula de Sistemas Operacionais - Modos do Kernel</a></li>
 
  <li><span class="post_date">02 Mar 2010</span> &raquo;<a class="post" href="/cartao-de-visitas">Cartão de visitas</a></li>
 
  <li><span class="post_date">01 Mar 2010</span> &raquo;<a class="post" href="/regexp-com-grep">Expressões Regulares com grep</a></li>
 
  <li><span class="post_date">25 Feb 2010</span> &raquo;<a class="post" href="/inspecionando-formulas-em-ruby">Inspecionando fórmulas em ruby</a></li>
 
  <li><span class="post_date">23 Feb 2010</span> &raquo;<a class="post" href="/regexp-maravilha">Expressões Regulares + Ruby = \*maravilhas</a></li>
 
  <li><span class="post_date">22 Feb 2010</span> &raquo;<a class="post" href="/sql-comentado">A linguagem SQL</a></li>
 
  <li><span class="post_date">21 Feb 2010</span> &raquo;<a class="post" href="/postgresql-tricks">PostgreSql Tricks</a></li>
 
  <li><span class="post_date">16 Feb 2010</span> &raquo;<a class="post" href="/inspecionando-regexp-com-sinatra">Inspecionando expressões regulares com Sinatra!</a></li>
 
  <li><span class="post_date">14 Feb 2010</span> &raquo;<a class="post" href="/leiaute-iphone">Leiaute para iPhone no Ideia.me</a></li>
 
  <li><span class="post_date">14 Feb 2010</span> &raquo;<a class="post" href="/google-code-playground">Google code playground</a></li>
 
  <li><span class="post_date">14 Feb 2010</span> &raquo;<a class="post" href="/estorias-bonitas-vs-testes-unitarios">Estórias Bonitas vs Testes Unitários</a></li>
 
  <li><span class="post_date">13 Feb 2010</span> &raquo;<a class="post" href="/rml-resume-markup-language">RML - Resume Markup Language</a></li>
 
  <li><span class="post_date">11 Feb 2010</span> &raquo;<a class="post" href="/de-volta-ao-tex">De volta as aulas</a></li>
 
  <li><span class="post_date">03 Feb 2010</span> &raquo;<a class="post" href="/bom-dia-a-dia">Bom dia a dia do desenvolvimento</a></li>
 
  <li><span class="post_date">01 Feb 2010</span> &raquo;<a class="post" href="/portfolio">Portfolio::Base</a></li>
 
  <li><span class="post_date">01 Feb 2010</span> &raquo;<a class="post" href="/curriculo">Currículo</a></li>
 
  <li><span class="post_date">31 Jan 2010</span> &raquo;<a class="post" href="/prototipo-site">Protótipo do site</a></li>
 
</ul>

  </div>
</div>


    </div>
  </body>
  <script type='text/javascript'>
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
      var pageTracker = _gat._getTracker("UA-12893758-1");
      pageTracker._trackPageview();
     } catch(err) {}
    </script>
</html>

